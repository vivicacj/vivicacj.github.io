<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Final 4-Hour Battle Plan - Dennis</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 0 0 15px 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        /* Navigation Bar */
        .nav-bar {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            border-radius: 15px 15px 0 0;
            max-width: 900px;
            margin: 0 auto;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 8px 18px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9em;
            white-space: nowrap;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .nav-btn.active {
            background: white;
            color: #34495e;
            border-color: white;
            box-shadow: 0 4px 15px rgba(255, 255, 255, 0.2);
        }

        /* Pages */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        .header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .content {
            padding: 40px 30px;
        }

        .mission-statement {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 20px;
            margin-bottom: 30px;
            border-radius: 5px;
        }

        .mission-statement p {
            font-weight: 500;
            font-size: 1.1em;
        }

        h2 {
            color: #667eea;
            margin-top: 40px;
            margin-bottom: 20px;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        h3 {
            color: #764ba2;
            margin-top: 30px;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        h4 {
            color: #f5576c;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .sprint {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 6px solid #667eea;
        }

        .sprint-title {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: bold;
        }

        .action-item {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            border-left: 4px solid #f5576c;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .flashcard-link {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 12px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            margin: 10px 10px 10px 0;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(245, 87, 108, 0.3);
        }

        .flashcard-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(245, 87, 108, 0.4);
        }

        .flashcard-link::before {
            content: "🎯";
            font-size: 1.2em;
        }

        .akm-box {
            background: #e3f2fd;
            border-left: 5px solid #2196f3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            position: relative;
        }

        .akm-title {
            color: #1976d2;
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 15px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .akm-link-btn {
            background: #1976d2;
            color: white;
            border: none;
            padding: 6px 15px;
            border-radius: 15px;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
        }

        .akm-link-btn:hover {
            background: #1565c0;
            transform: scale(1.05);
        }

        ul, ol {
            margin-left: 25px;
            margin-top: 10px;
            margin-bottom: 10px;
        }

        li {
            margin-bottom: 8px;
        }

        strong {
            color: #f5576c;
        }

        .strategy-box {
            background: #d4edda;
            border-left: 5px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .checkmark {
            color: #28a745;
            font-weight: bold;
            margin-right: 5px;
        }

        /* Notes Page Styles */
        .notes-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 30px;
            text-align: center;
        }

        .domain-section {
            margin: 30px 0;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .domain-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 25px;
            font-size: 1.5em;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .domain-header:hover {
            background: linear-gradient(135deg, #5568d3 0%, #653a8b 100%);
        }

        .domain-content {
            background: #f8f9fa;
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .domain-content.expanded {
            max-height: 5000px;
            padding: 25px;
            transition: max-height 0.5s ease-in;
        }

        .akm-module {
            background: white;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            scroll-margin-top: 100px;
        }

        .akm-header {
            background: #e3f2fd;
            padding: 15px 20px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 5px solid #2196f3;
        }

        .akm-header:hover {
            background: #bbdefb;
        }

        .akm-body {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .akm-body.expanded {
            max-height: 3000px;
            padding: 20px;
             transition: max-height 0.5s ease-in;
        }

        .akm-section {
            margin: 15px 0;
        }

        .akm-section-title {
            color: #f5576c;
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 10px;
        }

        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            font-size: 1.5em;
            box-shadow: 0 4px 15px rgba(245, 87, 108, 0.4);
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 1000;
        }

        .back-to-top:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 20px rgba(245, 87, 108, 0.6);
        }

        .back-to-top.visible {
            display: flex;
        }

        .toggle-icon {
            transition: transform 0.3s ease;
        }

        .toggle-icon.rotated {
            transform: rotate(180deg);
        }

        /* Progress Tracking Styles */
        .overall-progress {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        .overall-progress-title {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .overall-progress-bar {
            height: 20px;
            background: rgba(255,255,255,0.3);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .overall-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #48bb78 0%, #38a169 100%);
            border-radius: 10px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.85em;
        }

        .task-checkbox-container {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            margin: 5px 0;
            padding: 5px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
        }
        
        .task-checkbox-container .action-item {
            margin: 0;
        }

        .task-checkbox-container:hover {
            background: #f1f3f5;
            transform: translateX(5px);
        }

        .task-checkbox-container.completed {
            opacity: 0.6;
            border-left-color: #48bb78;
            background: #e6f4ea;
        }
        
        .task-checkbox-container.completed .action-item {
            background: transparent;
            box-shadow: none;
        }

        .task-checkbox {
            width: 24px;
            height: 24px;
            min-width: 24px;
            cursor: pointer;
            margin-top: 22px; /* Adjusted to align with text */
            margin-left: 10px;
        }

        .task-content {
            flex: 1;
        }

        .task-content.completed {
            text-decoration: line-through;
            color: #718096;
        }

        .sprint-progress {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 2px solid #e2e8f0;
        }

        .sprint-progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-weight: 600;
            color: #2d3748;
        }

        .sprint-progress-bar {
            height: 10px;
            background: #e2e8f0;
            border-radius: 5px;
            overflow: hidden;
        }

        .sprint-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .reset-progress-btn {
            background: #e53e3e;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-left: 15px;
        }

        .reset-progress-btn:hover {
            background: #c53030;
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            .header h1, .notes-header h1 {
                font-size: 1.8em;
            }

            .content {
                padding: 20px 15px;
            }

            .flashcard-link {
                display: flex;
                width: 100%;
                justify-content: center;
            }

            .nav-bar {
                flex-direction: column;
                gap: 10px;
                padding: 15px;
                border-radius: 15px;
            }
            .container {
                border-radius: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="nav-bar">
        <div style="color: white; font-weight: bold; font-size: 1.2em;">🧪 Chemistry Exam Guide</div>
        <div class="nav-buttons">
            <a href="#" class="nav-btn active" onclick="showPage('battle-plan', event); return false;">⚔️ Battle Plan</a>
            <a href="#" class="nav-btn" onclick="showPage('notes', event); return false;">📖 Detailed Notes</a>
            <a href="chemistry-first aid kit.html" class="nav-btn">📝 Golden Questions</a>
            <a href="equation-writing-diagnostic-tool.html" class="nav-btn">📝 Equation Tools</a>
            <a href="teacher-guide.html" class="nav-btn">📝 Teacher Guide</a>

        </div>
    </div>
    <div class="container">
        <!-- Page 1: Battle Plan -->
        <div id="battle-plan" class="page active">
            <div class="header">
                <h1>⚔️ Final 4-Hour Battle Plan ⚔️</h1>
                <p>Ultimate Exam Preparation Guide for Dennis</p>
            </div>

            <div class="content">
                <div class="mission-statement">
                    <p><strong>Dennis,</strong> The final hours are here. Your mission now is not to learn, but to <strong>activate and weaponize</strong> your existing knowledge. This is your definitive guide for the next 4 hours. Every action is designed for maximum impact.</p>
                </div>

                <!-- Overall Progress Tracker -->
                <div class="overall-progress">
                    <div class="overall-progress-title">
                        <span>🎯 Overall Battle Plan Progress</span>
                        <button class="reset-progress-btn" onclick="resetAllProgress()">🔄 Reset All Progress</button>
                    </div>
                     <p id="overall-progress-text" style="margin-bottom: 10px;">0 / 10 Tasks Completed</p>
                    <div class="overall-progress-bar">
                        <div class="overall-progress-fill" id="overall-progress-fill" style="width: 0%;">
                            <span id="overall-progress-percentage">0%</span>
                        </div>
                    </div>
                </div>

                <h2>🎯 The Grand Strategy (First 15 Minutes)</h2>
                <div class="strategy-box">
                    <p><strong>Read this first. Your mindset is your primary weapon.</strong></p>
                    <ol>
                        <li><strong>Trust Your System:</strong> Do not try to recall random facts. Trust the SOPs and Golden Templates in this guide. They are your automated scoring machines.</li>
                        <li><strong>Slow is Fast:</strong> Read every question twice. Underline the command verb (<code>Explain</code>, <code>Calculate</code>, <code>Describe</code>). This 5-second action prevents 50% of careless mistakes.</li>
                        <li><strong>Aim for Keywords, Not Perfection:</strong> Your goal is to hit the key scoring phrases. Clarity and precision over complex sentences.</li>
                    </ol>
                </div>

                <h2>⚡ The Tactical Execution (3h 45m Sprint)</h2>
                <p style="font-style: italic; color: #666;">This plan is divided into four focused sprints. Follow it precisely.</p>

                <!-- SPRINT 1 -->
                <div class="sprint">
                    <div class="sprint-title">SPRINT 1: Acids, Bases & Salts / QA (60 minutes)</div>
                    <p style="font-style: italic; margin-bottom: 20px;">This is the highest-weighted topic. Mastering this sprint sets the tone for an A1.</p>
                    
                     <!-- Sprint Progress -->
                    <div class="sprint-progress">
                        <div class="sprint-progress-header">
                            <span>Sprint 1 Progress</span>
                            <span id="sprint1-progress-text">0 / 2 Tasks</span>
                        </div>
                        <div class="sprint-progress-bar">
                            <div class="sprint-progress-fill" id="sprint1-progress-fill" style="width: 0%;"></div>
                        </div>
                    </div>

                    <h4>Activate & Internalize (30 mins):</h4>

                    <div class="task-checkbox-container" data-task-id="sprint1-task1">
                        <input type="checkbox" class="task-checkbox" onchange="updateProgress()">
                        <div class="task-content">
                            <div class="action-item">
                                <strong>Action 1: Master the "Why" & "How"</strong>
                                <p><strong>Drill this deck:</strong> <span class="checkmark">✅</span> Flashcard Deck 1.3: Core Topics - Level 3: Conceptual & Explanation Cards (17 terms)</p>
                                <a href="https://quizlet.com/sg/1069664568/flashcard-deck-13-core-topics-level-3-conceptual-explanation-cards-flash-cards/?i=118urv&x=1jqt" target="_blank" class="flashcard-link">Open Flashcards</a>
                                <p><strong>Why?</strong> This deck contains the "Golden Templates" for explaining melting points, conductivity, and crucial experimental rationales (why use excess, why wash). This is the key to scoring high on Paper 2 explanation questions.</p>
                            </div>
                        </div>
                    </div>

                    <div class="task-checkbox-container" data-task-id="sprint1-task2">
                        <input type="checkbox" class="task-checkbox" onchange="updateProgress()">
                        <div class="task-content">
                            <div class="action-item">
                                <strong>Action 2: Solidify the Procedures</strong>
                                <p><strong>Drill this deck:</strong> <span class="checkmark">✅</span> Flashcard Deck 1.2: Core Topics - Level 2: Procedural & SOP Cards (11 terms)</p>
                                <a href="https://quizlet.com/sg/1069663936/flashcard-deck-12-core-topics-level-2-procedural-sop-cards-flash-cards/?i=118urv&x=1jqt" target="_blank" class="flashcard-link">Open Flashcards</a>
                                <p><strong>Why?</strong> This deck contains the SOPs for the three methods of Salt Preparation and for writing Ionic Equations. This is your script for any "Describe the steps..." question.</p>
                            </div>
                        </div>
                    </div>

                    <h4>Weaponize (30 mins):</h4>
                    <p>Study these specific AKMs from your atomic notes. Read them, cover them, and recite the key points out loud.</p>

                    <div class="akm-box" id="akm-202-preview">
                        <div class="akm-title">
                            🧬 AKM #202: Salt Preparation Methods
                            <a href="#" onclick="goToAKM('akm-202'); return false;" class="akm-link-btn">📖 View Details</a>
                        </div>
                        <p><strong>Your Brain's GPS (The Decision Tree):</strong></p>
                        <ol>
                            <li><strong>Insoluble Salt?</strong> ➡️ <strong>Precipitation.</strong></li>
                            <li><strong>Soluble Salt + Soluble Reactants?</strong> ➡️ <strong>Titration.</strong></li>
                            <li><strong>Soluble Salt + Insoluble Reactant?</strong> ➡️ <strong>Excess Reactant.</strong></li>
                        </ol>
                        <p><strong>Your "Describe" Script (Excess Reactant SOP):</strong></p>
                        <ol>
                            <li>Add <strong>excess</strong> insoluble solid to <strong>warm acid</strong>.</li>
                            <li><strong>Filter</strong> to remove excess solid.</li>
                            <li><strong>Heat</strong> filtrate until <strong>saturated</strong>, then <strong>cool</strong> to crystallise.</li>
                            <li><strong>Filter</strong>, <strong>wash</strong> with cold water, and <strong>dry</strong>.</li>
                        </ol>
                        <p><strong>Your "Explain Why" Scoring Phrases:</strong></p>
                        <ul>
                            <li><strong>Why add excess?</strong> ➡️ "To ensure all the acid is completely reacted, so the final salt is pure."</li>
                        </ul>
                    </div>

                    <div class="akm-box" id="akm-204-preview">
                        <div class="akm-title">
                            🧬 AKM #204: QA Tests for Ions & Gases
                            <a href="#" onclick="goToAKM('akm-204'); return false;" class="akm-link-btn">📖 View Details</a>
                        </div>
                        <p><strong>Your "Instant Recall" List:</strong></p>
                        <ul>
                            <li><strong>Gases:</strong> CO₂→Limewater→White Ppt; NH₃→Moist Red Litmus→Blue.</li>
                            <li><strong>Anions:</strong> <strong>ACIDIFY FIRST!</strong> Cl⁻+AgNO₃→White Ppt; SO₄²⁻+Ba(NO₃)₂→White Ppt.</li>
                            <li><strong>Cations:</strong> Cu²⁺→Blue Ppt; Fe²⁺→Green Ppt; Fe³⁺→Red-Brown Ppt.</li>
                        </ul>
                    </div>
                </div>

                <!-- SPRINT 2 -->
                <div class="sprint">
                    <div class="sprint-title">SPRINT 2: Stoichiometry & Pitfall Annihilation (60 minutes)</div>
                    <p style="font-style: italic; margin-bottom: 20px;">This sprint is about ensuring zero careless mistakes in calculations and knowing every trap.</p>

                    <!-- Sprint Progress -->
                    <div class="sprint-progress">
                        <div class="sprint-progress-header">
                            <span>Sprint 2 Progress</span>
                            <span id="sprint2-progress-text">0 / 2 Tasks</span>
                        </div>
                        <div class="sprint-progress-bar">
                            <div class="sprint-progress-fill" id="sprint2-progress-fill" style="width: 0%;"></div>
                        </div>
                    </div>

                    <h4>Activate & Internalize (30 mins):</h4>

                    <div class="task-checkbox-container" data-task-id="sprint2-task1">
                        <input type="checkbox" class="task-checkbox" onchange="updateProgress()">
                        <div class="task-content">
                            <div class="action-item">
                                <strong>Action 1: Master the Traps</strong>
                                <p><strong>Drill this deck:</strong> <span class="checkmark">✅</span> Flashcard Deck 1.4: Core Topics - Level 4: Pitfall & Error Cards (16 terms)</p>
                                <a href="https://quizlet.com/sg/1069665062/flashcard-deck-14-core-topics-level-4-pitfall-error-cards-flash-cards/?i=118urv&x=1jqt" target="_blank" class="flashcard-link">Open Flashcards</a>
                                <p><strong>Why?</strong> <strong>This is the most important deck for today.</strong> It's your pre-battle briefing on enemy tactics. Knowing what <em>not</em> to do is more valuable than learning a new fact now. Pay special attention to the pitfalls for bonding explanations.</p>
                            </div>
                        </div>
                    </div>

                    <div class="task-checkbox-container" data-task-id="sprint2-task2">
                        <input type="checkbox" class="task-checkbox" onchange="updateProgress()">
                        <div class="task-content">
                            <div class="action-item">
                                <strong>Action 2: Review the Calculation Engine</strong>
                                <p><strong>Quickly review</strong> the Stoichiometry cards within <span class="checkmark">✅</span> Flashcard Deck 1.2 (Level 2).</p>
                                <p><strong>Why?</strong> To ensure the 4-step calculation SOP and the Limiting Reactant SOP are fresh in your mind.</p>
                            </div>
                        </div>
                    </div>

                    <h4>Weaponize (30 mins):</h4>
                    <p>Study these specific AKMs. This is your pre-flight checklist for all calculations.</p>

                    <div class="akm-box" id="akm-calc-preview">
                        <div class="akm-title">
                            🧬 AKM #402 & #502 & #601: The Calculation Engine
                            <a href="#" onclick="goToAKM('akm-calc'); return false;" class="akm-link-btn">📖 View Details</a>
                        </div>
                        <p><strong>Your Toolbox (The Holy Trinity):</strong></p>
                        <ol>
                            <li><code>n = m / Mᵣ</code></li>
                            <li><code>n = C × V</code> <strong>(V must be in dm³!)</strong></li>
                            <li><code>n = V / 24</code> <strong>(V must be in dm³!)</strong></li>
                        </ol>
                        <p><strong>THE GOLDEN RULE:</strong> <strong>1 dm³ = 1000 cm³.</strong> <strong>Always divide cm³ by 1000.</strong></p>
                        <p><strong>Your Main SOP (The 4-Step Process):</strong></p>
                        <ol>
                            <li>Moles of <strong>Known</strong>.</li>
                            <li><strong>Mole Ratio</strong> (from BALANCED equation).</li>
                            <li>Moles of <strong>Unknown</strong>.</li>
                            <li><strong>Convert</strong> to Final Answer.</li>
                        </ol>
                        <p><strong>Your "Pre-Check" SOP (Limiting Reactant):</strong></p>
                        <p><em>(IF two reactant amounts are given):</em></p>
                        <ol>
                            <li>Calculate moles of <strong>BOTH</strong>.</li>
                            <li>Compare to ratio to find the one that runs out first.</li>
                            <li><strong>Use ONLY the moles of the limiting reactant</strong> for all further steps.</li>
                        </ol>
                    </div>
                </div>

                <!-- SPRINT 3 -->
                <div class="sprint">
                    <div class="sprint-title">SPRINT 3: Chemical Bonding & Structure (45 minutes)</div>
                    <p style="font-style: italic; margin-bottom: 20px;">This sprint is a high-speed reinforcement of the most challenging explanation topic.</p>

                    <!-- Sprint Progress -->
                    <div class="sprint-progress">
                        <div class="sprint-progress-header">
                            <span>Sprint 3 Progress</span>
                            <span id="sprint3-progress-text">0 / 2 Tasks</span>
                        </div>
                        <div class="sprint-progress-bar">
                            <div class="sprint-progress-fill" id="sprint3-progress-fill" style="width: 0%;"></div>
                        </div>
                    </div>

                    <h4>Activate & Internalize (15 mins):</h4>

                    <div class="task-checkbox-container" data-task-id="sprint3-task1">
                        <input type="checkbox" class="task-checkbox" onchange="updateProgress()">
                        <div class="task-content">
                            <div class="action-item">
                                <strong>Action 1:</strong> Re-drill the Chemical Bonding cards from <span class="checkmark">✅</span> Deck 1.3 (Conceptual).
                            </div>
                        </div>
                    </div>

                    <div class="task-checkbox-container" data-task-id="sprint3-task2">
                        <input type="checkbox" class="task-checkbox" onchange="updateProgress()">
                        <div class="task-content">
                            <div class="action-item">
                                <strong>Action 2:</strong> Re-drill the Chemical Bonding cards from <span class="checkmark">✅</span> Deck 1.4 (Pitfalls).
                                <p><strong>Why?</strong> Repetition is key. You are reinforcing the templates and pitfalls you reviewed in the previous sprint.</p>
                            </div>
                        </div>
                    </div>

                    <h4>Weaponize (30 mins):</h4>
                    <p>Study this specific AKM. This is where A1 answers are made.</p>

                    <div class="akm-box" id="akm-bonding-preview">
                        <div class="akm-title">
                            🧬 AKM #901 & #902: Explaining Physical Properties
                            <a href="#" onclick="goToAKM('akm-bonding'); return false;" class="akm-link-btn">📖 View Details</a>
                        </div>
                        <p><strong>Your "Explain High/Low Melting Point" Script:</strong></p>
                        <ol>
                            <li><strong>Structure:</strong> "X has a <strong>giant ionic lattice / simple molecular</strong> structure."</li>
                            <li><strong>Forces:</strong> "There are <strong>strong electrostatic forces of attraction</strong> / <strong>weak intermolecular forces of attraction</strong>."</li>
                            <li><strong>Energy:</strong> "A <strong>large / small</strong> amount of energy is needed to overcome these forces."</li>
                        </ol>
                        <p><strong>Your "Explain Conductivity" Script:</strong></p>
                        <ul>
                            <li><strong>Core Principle:</strong> Requires <strong>MOBILE CHARGE CARRIERS</strong>.</li>
                            <li><strong>Ionic Solid:</strong> "Ions are in <strong>fixed positions</strong>... <strong>not free to move</strong>."</li>
                            <li><strong>Ionic Molten/Aqueous:</strong> "Ions are <strong>free to move</strong>."</li>
                        </ul>
                    </div>
                </div>

                <!-- SPRINT 4 -->
                <div class="sprint">
                    <div class="sprint-title">SPRINT 4: Final Activation & Mental Cooldown (60 minutes)</div>

                    <!-- Sprint Progress -->
                    <div class="sprint-progress">
                        <div class="sprint-progress-header">
                            <span>Sprint 4 Progress</span>
                            <span id="sprint4-progress-text">0 / 4 Tasks</span>
                        </div>
                        <div class="sprint-progress-bar">
                            <div class="sprint-progress-fill" id="sprint4-progress-fill" style="width: 0%;"></div>
                        </div>
                    </div>

                    <h4>Activate (30 mins):</h4>

                    <div class="task-checkbox-container" data-task-id="sprint4-task1">
                        <input type="checkbox" class="task-checkbox" onchange="updateProgress()">
                        <div class="task-content">
                            <div class="action-item">
                                <strong>Action 1: Rapid-Fire Fact Recall</strong>
                                <p><strong>Drill this deck:</strong> <span class="checkmark">✅</span> Flashcard Deck 1.1: Core Topics - Level 1: Fact & Definition Cards (48 terms)</p>
                                <a href="https://quizlet.com/sg/1069663106/flashcard-deck-11-core-topics-level-1-fact-definition-cards-diagram/?i=118urv&x=1jqt" target="_blank" class="flashcard-link">Open Flashcards</a>
                                <p><strong>How?</strong> Do not study. This is a speed run. See the front, say the back, check, and move on. If you know it, swipe. If you hesitate, pause for 5 seconds, then swipe.</p>
                            </div>
                        </div>
                    </div>

                    <div class="task-checkbox-container" data-task-id="sprint4-task2">
                        <input type="checkbox" class="task-checkbox" onchange="updateProgress()">
                        <div class="task-content">
                            <div class="action-item">
                                <strong>Action 2: Reinforce Experimental Knowledge</strong>
                                <p><strong>Quickly scan:</strong> <span class="checkmark">✅</span> Flashcard Deck 2: Satellite Topics - Experimental Chemistry (25 terms)</p>
                                <a href="https://quizlet.com/sg/1069661234/flashcard-deck-2-satellite-topics-experimental-chemistry-flash-cards/?i=118urv&x=1jqt" target="_blank" class="flashcard-link">Open Flashcards</a>
                                <p><strong>Why?</strong> Apparatus and separation techniques are common, easy marks in Paper 1 and Section A of Paper 2.</p>
                            </div>
                        </div>
                    </div>

                    <h4>Internalize & Cool Down (30 mins):</h4>

                    <div class="task-checkbox-container" data-task-id="sprint4-task3">
                        <input type="checkbox" class="task-checkbox" onchange="updateProgress()">
                        <div class="task-content">
                            <div class="action-item">
                                <p><strong>(15 mins)</strong> Take out the Quick-Look Cheat Sheets for all four Core Topics. Read them through one last time. This is your final summary.</p>
                            </div>
                        </div>
                    </div>

                    <div class="task-checkbox-container" data-task-id="sprint4-task4">
                        <input type="checkbox" class="task-checkbox" onchange="updateProgress()">
                        <div class="task-content">
                            <div class="action-item">
                                <p><strong>(15 mins)</strong> <strong>Close everything.</strong> Walk around. In your mind, visualize the Salt Prep Decision Tree. Recite the Golden Template for explaining melting points. Recall the 4-step Stoichiometry SOP.</p>
                                <p><strong>Then, you are done.</strong></p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="strategy-box" style="text-align: center; margin-top: 40px;">
                    <h3 style="color: #28a745; margin-top: 0;">🎯 Mission Complete</h3>
                    <p><strong>Your mission is complete. You have activated the most critical knowledge and skills. Trust your preparation. Good luck tomorrow.</strong></p>
                </div>
            </div>
        </div>

        <!-- Page 2: Detailed Notes -->
        <div id="notes" class="page">
            <div class="notes-header">
                <h1>📖 Ultimate Atomic Notes</h1>
                <p>Detailed Knowledge Modules Referenced in Your Battle Plan</p>
            </div>

            <div class="content">
                <div class="mission-statement">
                    <p><strong>Quick Navigation:</strong> Click on any domain to expand and view the detailed AKM modules. Each module contains the complete framework with academic concepts, exam toolkits, and common pitfalls.</p>
                </div>

                <!-- Domain 1: Acids, Bases & Salts -->
                <div class="domain-section">
                    <div class="domain-header" onclick="toggleDomain('domain1')">
                        <span>🧪 Domain 1: Acids, Bases & Salts</span>
                        <span class="toggle-icon" id="icon-domain1">▼</span>
                    </div>
                    <div class="domain-content" id="domain1">

                        <!-- AKM #102: Solubility Rules (NEW) -->
                        <div class="akm-module" id="akm-102">
                            <div class="akm-header" onclick="toggleAKM('akm-102')">
                                <div>
                                    <strong>🧬 AKM #102: Solubility Rules</strong>
                                    <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                                        📍 Used in: Equation Writing | Priority: ★★★ Critical
                                    </div>
                                </div>
                                <span class="toggle-icon" id="icon-akm-102">▼</span>
                            </div>
                            <div class="akm-body" id="body-akm-102">
                                <div class="akm-section">
                                    <div class="akm-section-title">1️⃣ Academic Core Concept</div>
                                    <p><strong>🧠 Conceptual Framework:</strong> Solubility rules are a set of guidelines to predict whether an ionic compound will dissolve in water to form an aqueous solution or remain as a solid precipitate.</p>
                                </div>
                                <div class="akm-section">
                                    <div class="akm-section-title">2️⃣ Exam Answer Toolkit</div>
                                    <p><strong>📋 The "SNAP" Rule - Always Soluble:</strong></p>
                                    <ul>
                                        <li><strong>S</strong>odium (Na⁺) salts</li>
                                        <li><strong>N</strong>itrate (NO₃⁻) salts</li>
                                        <li><strong>A</strong>mmonium (NH₄⁺) salts</li>
                                        <li><strong>P</strong>otassium (K⁺) salts</li>
                                    </ul>
                                    <p style="margin-top: 15px;"><strong>📋 General Rules & Exceptions:</strong></p>
                                    <ul>
                                        <li><strong>Generally Soluble:</strong>
                                            <ul>
                                                <li>Most <strong>Chlorides</strong> (Cl⁻), <strong>except</strong> for Silver (AgCl) and Lead(II) (PbCl₂).</li>
                                                <li>Most <strong>Sulfates</strong> (SO₄²⁻), <strong>except</strong> for Barium (BaSO₄), Calcium (CaSO₄), and Lead(II) (PbSO₄).</li>
                                            </ul>
                                        </li>
                                        <li style="margin-top: 10px;"><strong>Generally Insoluble:</strong>
                                            <ul>
                                                <li>Most <strong>Carbonates</strong> (CO₃²⁻), except for SNAP salts.</li>
                                                <li>Most <strong>Hydroxides</strong> (OH⁻), except for SNAP salts and Barium/Calcium (which are slightly soluble).</li>
                                            </ul>
                                        </li>
                                    </ul>
                                </div>
                                <div class="akm-section">
                                    <div class="akm-section-title">3️⃣ Common Errors & Pitfalls</div>
                                    <div style="background: #f8d7da; padding: 15px; border-radius: 5px; border-left: 4px solid #dc3545;">
                                        <p><strong>❌ ERROR:</strong> Forgetting the exceptions, especially for chlorides and sulfates.</p>
                                        <p><strong>✅ CORRECTION:</strong> Memorize "Lead, Silver" for chlorides and "Lead, Barium, Calcium" for sulfates.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- AKM #201: Acid Reaction Models (NEW) -->
                        <div class="akm-module" id="akm-201">
                            <div class="akm-header" onclick="toggleAKM('akm-201')">
                                <div>
                                    <strong>🧬 AKM #201: Acid Reaction Models</strong>
                                    <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                                        📍 Used in: Equation Writing | Priority: ★★★ Critical
                                    </div>
                                </div>
                                <span class="toggle-icon" id="icon-akm-201">▼</span>
                            </div>
                            <div class="akm-body" id="body-akm-201">
                                <div class="akm-section">
                                    <div class="akm-section-title">1️⃣ Academic Core Concept</div>
                                    <p><strong>🧠 Conceptual Framework:</strong> Acids exhibit predictable reaction patterns with specific types of substances. Knowing these models is the first step to writing correct chemical equations.</p>
                                </div>
                                <div class="akm-section">
                                    <div class="akm-section-title">2️⃣ Exam Answer Toolkit (The 3 Golden Rules)</div>
                                    <ol>
                                        <li><strong>Acid + Reactive Metal → Salt + Hydrogen gas</strong>
                                            <br><em>(e.g., Mg + 2HCl → MgCl₂ + H₂)</em>
                                        </li>
                                        <li><strong>Acid + Carbonate → Salt + Water + Carbon Dioxide gas</strong>
                                            <br><em>(e.g., CaCO₃ + 2HCl → CaCl₂ + H₂O + CO₂)</em>
                                        </li>
                                        <li><strong>Acid + Base / Metal Oxide → Salt + Water (Neutralization)</strong>
                                            <br><em>(e.g., CuO + H₂SO₄ → CuSO₄ + H₂O)</em>
                                        </li>
                                    </ol>
                                </div>
                                <div class="akm-section">
                                    <div class="akm-section-title">3️⃣ Common Errors & Pitfalls</div>
                                    <div style="background: #f8d7da; padding: 15px; border-radius: 5px; border-left: 4px solid #dc3545;">
                                        <p><strong>❌ ERROR:</strong> Trying to react an unreactive metal (like copper, silver, gold) with a dilute acid.</p>
                                        <p><strong>✅ CORRECTION:</strong> Only metals above hydrogen in the reactivity series will displace hydrogen from an acid.</p>
                                        <p style="margin-top:15px;"><strong>❌ ERROR:</strong> Forgetting "water" as a product in the acid-carbonate reaction.</p>
                                        <p><strong>✅ CORRECTION:</strong> The products are always Salt + H₂O + CO₂.</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- AKM #202 -->
                        <div class="akm-module" id="akm-202">
                            <div class="akm-header" onclick="toggleAKM('akm-202')">
                                <div>
                                    <strong>🧬 AKM #202: Salt Preparation Methods</strong>
                                    <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                                        📍 Used in: Sprint 1 | Syllabus: 7.1(e-g) | Priority: ★★★ Critical
                                    </div>
                                </div>
                                <span class="toggle-icon" id="icon-akm-202">▼</span>
                            </div>
                            <div class="akm-body" id="body-akm-202">
                                <div class="akm-section">
                                    <div class="akm-section-title">1️⃣ Academic Core Concept</div>
                                    <p><strong>🧠 Conceptual Framework:</strong> Salt preparation is governed by the <strong>solubility principle</strong>. The method chosen depends on whether the salt and reactants are soluble or insoluble in water.</p>
                                    <p><strong>The Three-Path Decision Tree:</strong></p>
                                    <ol>
                                        <li><strong>Precipitation:</strong> For preparing <strong>insoluble salts</strong> from two soluble reactants.</li>
                                        <li><strong>Titration:</strong> For preparing <strong>soluble salts</strong> from two soluble reactants (alkali + acid).</li>
                                        <li><strong>Excess Reactant Method:</strong> For preparing <strong>soluble salts</strong> from a soluble acid and an insoluble reactant (metal, metal oxide, metal carbonate).</li>
                                    </ol>
                                </div>
                                <div class="akm-section">
                                    <div class="akm-section-title">2️⃣ Exam Answer Toolkit</div>
                                    <p><strong>📋 Method Selection SOP:</strong></p>
                                    <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin: 10px 0;">
                                        <p><strong>STEP 1:</strong> Identify if the salt is soluble or insoluble (use solubility rules)</p>
                                        <p><strong>STEP 2:</strong> If insoluble → Use Precipitation</p>
                                        <p><strong>STEP 3:</strong> If soluble, check reactants:</p>
                                        <ul>
                                            <li>Both soluble (alkali + acid) → Titration</li>
                                            <li>One insoluble → Excess Reactant Method</li>
                                        </ul>
                                    </div>
                                    <p><strong>✍️ Excess Reactant Method - Complete Procedure:</strong></p>
                                    <ol>
                                        <li>Add <strong>excess</strong> insoluble reactant to <strong>warm dilute acid</strong> in a beaker.</li>
                                        <li>Stir until the reaction stops (no more fizzing/no more solid dissolves).</li>
                                        <li><strong>Filter</strong> the mixture to remove excess unreacted solid.</li>
                                        <li>Collect the filtrate and <strong>heat gently</strong> to evaporate until the solution becomes <strong>saturated</strong> (crystals start to form at the edge).</li>
                                        <li><strong>Cool</strong> the solution to allow crystals to form.</li>
                                        <li><strong>Filter</strong> to collect the crystals.</li>
                                        <li><strong>Wash</strong> the crystals with cold distilled water.</li>
                                        <li><strong>Dry</strong> the crystals between filter papers or in a warm oven.</li>
                                    </ol>
                                    <p><strong>🎯 Key Scoring Phrases:</strong></p>
                                    <ul>
                                        <li><strong>"Why add excess?"</strong> → "To ensure all the acid is completely neutralized/reacted, so no acid remains in the final salt."</li>
                                        <li><strong>"Why filter?"</strong> → "To remove the excess unreacted solid from the salt solution."</li>
                                        <li><strong>"Why wash with cold water?"</strong> → "To remove impurities on the surface of the crystals without dissolving them."</li>
                                        <li><strong>"Why heat until saturated?"</strong> → "To concentrate the solution so crystals can form upon cooling."</li>
                                    </ul>
                                </div>
                                <div class="akm-section">
                                    <div class="akm-section-title">3️⃣ Common Errors & Pitfalls</div>
                                    <div style="background: #f8d7da; padding: 15px; border-radius: 5px; border-left: 4px solid #dc3545;">
                                        <p><strong>❌ ERROR 1:</strong> Saying "add excess to ensure complete reaction" without specifying <em>what</em> reacts completely.</p>
                                        <p><strong>✅ CORRECTION:</strong> "Add excess to ensure all the <strong>acid</strong> is completely reacted."</p>
                                        <p style="margin-top: 15px;"><strong>❌ ERROR 2:</strong> Confusing which substance is in excess (student adds excess acid).</p>
                                        <p><strong>✅ CORRECTION:</strong> Always add excess <strong>insoluble reactant</strong> (metal/metal oxide/metal carbonate), not acid.</p>
                                        <p style="margin-top: 15px;"><strong>❌ ERROR 3:</strong> Saying "wash with hot water."</p>
                                        <p><strong>✅ CORRECTION:</strong> Wash with <strong>cold</strong> distilled water to minimize dissolving the salt crystals.</p>
                                    </div>
                                </div>
                                <div class="akm-section">
                                    <div class="akm-section-title">4️⃣ Knowledge Links</div>
                                    <p><strong>🔗 Connected Concepts:</strong></p>
                                    <ul>
                                        <li>→ AKM #102: Solubility Rules (determines which method to use)</li>
                                        <li>→ AKM #203: Writing Ionic Equations (needed for precipitation)</li>
                                        <li>→ Experimental Chemistry: Filtration & Crystallization techniques</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <!-- AKM #204 -->
                        <div class="akm-module" id="akm-204">
                            <div class="akm-header" onclick="toggleAKM('akm-204')">
                                <div>
                                    <strong>🧬 AKM #204: Qualitative Analysis - Tests for Ions & Gases</strong>
                                    <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                                        📍 Used in: Sprint 1 | Syllabus: 7.2(a-d) | Priority: ★★★ Critical
                                    </div>
                                </div>
                                <span class="toggle-icon" id="icon-akm-204">▼</span>
                            </div>
                            <div class="akm-body" id="body-akm-204">
                                <!-- Content for AKM #204 remains the same -->
                               <div class="akm-section">
                                    <div class="akm-section-title">1️⃣ Academic Core Concept</div>
                                    <p><strong>🧠 Conceptual Framework:</strong> Qualitative analysis identifies ions through <strong>characteristic reactions</strong> that produce visible changes (color changes, precipitates, gas evolution).</p>
                                    <p><strong>Key Principle:</strong> Each ion has a unique "fingerprint" - a specific reagent produces a specific observable result.</p>
                                </div>
                                <div class="akm-section">
                                    <div class="akm-section-title">2️⃣ Exam Answer Toolkit</div>
                                    <p><strong>🔬 Gas Tests (Most Common in Exams):</strong></p>
                                    <table style="width: 100%; border-collapse: collapse; margin: 15px 0; text-align: left;">
                                        <tr style="background: #e3f2fd;">
                                            <th style="border: 1px solid #ddd; padding: 10px;">Gas</th>
                                            <th style="border: 1px solid #ddd; padding: 10px;">Test</th>
                                            <th style="border: 1px solid #ddd; padding: 10px;">Positive Result</th>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #ddd; padding: 10px;"><strong>CO₂</strong></td>
                                            <td style="border: 1px solid #ddd; padding: 10px;">Bubble through limewater</td>
                                            <td style="border: 1px solid #ddd; padding: 10px;">Limewater turns cloudy/milky white</td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #ddd; padding: 10px;"><strong>NH₃</strong></td>
                                            <td style="border: 1px solid #ddd; padding: 10px;">Hold moist red litmus paper in gas</td>
                                            <td style="border: 1px solid #ddd; padding: 10px;">Red litmus turns blue</td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #ddd; padding: 10px;"><strong>H₂</strong></td>
                                            <td style="border: 1px solid #ddd; padding: 10px;">Apply lighted splint</td>
                                            <td style="border: 1px solid #ddd; padding: 10px;">"Pop" sound</td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #ddd; padding: 10px;"><strong>O₂</strong></td>
                                            <td style="border: 1px solid #ddd; padding: 10px;">Apply glowing splint</td>
                                            <td style="border: 1px solid #ddd; padding: 10px;">Splint relights</td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid #ddd; padding: 10px;"><strong>Cl₂</strong></td>
                                            <td style="border: 1px solid #ddd; padding: 10px;">Hold moist blue litmus paper</td>
                                            <td style="border: 1px solid #ddd; padding: 10px;">Blue litmus bleached white</td>
                                        </tr>
                                    </table>
                                    <p><strong>💧 Anion Tests (CRITICAL: Must acidify first!):</strong></p>
                                    <div style="background: #fff3cd; padding: 15px; border-radius: 5px; margin: 10px 0;">
                                        <p><strong>⚠️ THE GOLDEN RULE:</strong> Always <strong>acidify with dilute HNO₃</strong> before testing for Cl⁻, Br⁻, I⁻, or SO₄²⁻!</p>
                                        <p><strong>Why?</strong> To prevent false positives from carbonate ions.</p>
                                    </div>
                                    <table style="width: 100%; border-collapse: collapse; margin: 15px 0; text-align: left;">
                                       <!-- Anion Test Table Content -->
                                    </table>
                                    <p><strong>⚛️ Cation Tests (Using Aqueous NaOH or NH₃):</strong></p>
                                    <table style="width: 100%; border-collapse: collapse; margin: 15px 0; text-align: left;">
                                       <!-- Cation Test Table Content -->
                                    </table>
                                </div>
                                <div class="akm-section">
                                    <div class="akm-section-title">3️⃣ Common Errors & Pitfalls</div>
                                   <!-- Pitfalls Content -->
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <!-- Domain 2: Stoichiometry -->
                <div class="domain-section">
                    <div class="domain-header" onclick="toggleDomain('domain2')">
                        <span>⚖️ Domain 2: Stoichiometry & Quantitative Chemistry</span>
                        <span class="toggle-icon" id="icon-domain2">▼</span>
                    </div>
                    <div class="domain-content" id="domain2">

                        <!-- AKM #402, #502, #601 Combined -->
                        <div class="akm-module" id="akm-calc">
                            <div class="akm-header" onclick="toggleAKM('akm-calc')">
                                <div>
                                    <strong>🧬 AKM #402, #502, #601: The Calculation Engine</strong>
                                    <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                                        📍 Used in: Sprint 2 | Syllabus: 4.1-4.3, 5.2, 6.1 | Priority: ★★★ Critical
                                    </div>
                                </div>
                                <span class="toggle-icon" id="icon-akm-calc">▼</span>
                            </div>
                            <div class="akm-body" id="body-akm-calc">
                                <!-- Content for Calculation Engine remains the same -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Domain 3: Chemical Bonding -->
                <div class="domain-section">
                    <div class="domain-header" onclick="toggleDomain('domain3')">
                        <span>🔗 Domain 3: Chemical Bonding & Structure</span>
                        <span class="toggle-icon" id="icon-domain3">▼</span>
                    </div>
                    <div class="domain-content" id="domain3">
                        <!-- AKM #901 & #902 -->
                        <div class="akm-module" id="akm-bonding">
                            <div class="akm-header" onclick="toggleAKM('akm-bonding')">
                                <div>
                                    <strong>🧬 AKM #901 & #902: Explaining Physical Properties via Bonding</strong>
                                    <div style="font-size: 0.85em; color: #666; margin-top: 5px;">
                                        📍 Used in: Sprint 3 | Syllabus: 9.1-9.3 | Priority: ★★★ Critical
                                    </div>
                                </div>
                                <span class="toggle-icon" id="icon-akm-bonding">▼</span>
                            </div>
                            <div class="akm-body" id="body-akm-bonding">
                               <!-- Content for Bonding remains the same -->
                            </div>
                        </div>
                    </div>
                </div>

                <div class="strategy-box" style="text-align: center; margin-top: 40px;">
                    <h3 style="color: #28a745; margin-top: 0;">📚 Notes Complete</h3>
                    <p><strong>You now have access to all the detailed AKM modules referenced in your Battle Plan. Use the navigation to switch between pages, and click the "View Details" buttons in the Battle Plan to jump directly to specific modules.</strong></p>
                    <button class="nav-btn" onclick="showPage('battle-plan', event)" style="margin-top: 15px; display: inline-block;">⬅️ Back to Battle Plan</button>
                </div>
            </div>
        </div>

        <!-- Back to Top Button -->
        <button class="back-to-top" id="backToTopBtn" onclick="scrollToTop()">↑</button>
    </div>

    <script>
        // --- UI & Navigation ---
        
        // Page Navigation
        function showPage(pageId, event) {
            // Deactivate all pages and nav buttons
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));

            // Activate the target page
            document.getElementById(pageId).classList.add('active');

            // Activate the clicked button (or the one passed in the event)
            if (event && event.currentTarget) {
                event.currentTarget.classList.add('active');
            }
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
            localStorage.setItem('currentPage', pageId);
        }

        // Domain Toggle
        function toggleDomain(domainId) {
            const content = document.getElementById(domainId);
            const icon = document.getElementById('icon-' + domainId);
            content.classList.toggle('expanded');
            icon.classList.toggle('rotated');
        }

        // AKM Module Toggle
        function toggleAKM(akmId) {
            const body = document.getElementById('body-' + akmId);
            const icon = document.getElementById('icon-' + akmId);
            body.classList.toggle('expanded');
            icon.classList.toggle('rotated');
        }

        // Navigate to AKM from Battle Plan
        function goToAKM(akmId) {
            showPage('notes');
            
            setTimeout(() => {
                const targetAKM = document.getElementById(akmId);
                if (targetAKM) {
                    const domainContent = targetAKM.closest('.domain-content');
                    if (domainContent && !domainContent.classList.contains('expanded')) {
                        toggleDomain(domainContent.id);
                    }
                    
                    const akmBody = document.getElementById('body-' + akmId);
                    if (akmBody && !akmBody.classList.contains('expanded')) {
                        toggleAKM(akmId);
                    }
                    
                    targetAKM.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    
                    targetAKM.style.boxShadow = '0 0 20px rgba(245, 87, 108, 0.6)';
                    setTimeout(() => {
                        targetAKM.style.boxShadow = '0 2px 5px rgba(0,0,0,0.1)';
                    }, 2000);
                }
            }, 100);
        }

        // Back to Top Button
        const backToTopBtn = document.getElementById('backToTopBtn');
        window.onscroll = function() {
            if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                backToTopBtn.classList.add('visible');
            } else {
                backToTopBtn.classList.remove('visible');
            }
        };

        function scrollToTop() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // --- Progress Tracking System ---
        const STORAGE_KEY = 'chemistry_battle_plan_progress';

        function updateProgress() {
            const allCheckboxes = document.querySelectorAll('.task-checkbox');
            const checkedBoxes = document.querySelectorAll('.task-checkbox:checked');
            
            const totalTasks = allCheckboxes.length;
            const completedTasks = checkedBoxes.length;
            const percentage = totalTasks > 0 ? (completedTasks / totalTasks) * 100 : 0;
            
            // Update overall progress elements
            document.getElementById('overall-progress-text').textContent = `${completedTasks} / ${totalTasks} Tasks Completed`;
            document.getElementById('overall-progress-fill').style.width = percentage + '%';
            document.getElementById('overall-progress-percentage').textContent = Math.round(percentage) + '%';
            
            // Update progress for each sprint
            updateSprintProgress('sprint1');
            updateSprintProgress('sprint2');
            updateSprintProgress('sprint3');
            updateSprintProgress('sprint4');
            
            // Update visual state of task items
            allCheckboxes.forEach(checkbox => {
                const container = checkbox.closest('.task-checkbox-container');
                const content = container.querySelector('.task-content');
                if (checkbox.checked) {
                    container.classList.add('completed');
                    content.classList.add('completed');
                } else {
                    container.classList.remove('completed');
                    content.classList.remove('completed');
                }
            });
            
            saveProgress();
        }

        function updateSprintProgress(sprintId) {
            const sprintContainer = document.querySelector(`[data-task-id^="${sprintId}"]`).closest('.sprint');
            if (!sprintContainer) return;

            const sprintCheckboxes = sprintContainer.querySelectorAll('.task-checkbox');
            const totalTasks = sprintCheckboxes.length;
            const completedInSprint = Array.from(sprintCheckboxes).filter(cb => cb.checked).length;
            
            const percentage = totalTasks > 0 ? (completedInSprint / totalTasks) * 100 : 0;
            
            const progressText = document.getElementById(`${sprintId}-progress-text`);
            const progressFill = document.getElementById(`${sprintId}-progress-fill`);
            
            if (progressText) {
                progressText.textContent = `${completedInSprint} / ${totalTasks} Tasks`;
            }
            if (progressFill) {
                progressFill.style.width = percentage + '%';
            }
        }

        function saveProgress() {
            const checkboxStates = {};
            document.querySelectorAll('.task-checkbox-container').forEach(container => {
                const taskId = container.getAttribute('data-task-id');
                const checkbox = container.querySelector('.task-checkbox');
                if (taskId && checkbox) {
                    checkboxStates[taskId] = checkbox.checked;
                }
            });
            localStorage.setItem(STORAGE_KEY, JSON.stringify(checkboxStates));
        }

        function loadProgress() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (!saved) {
                updateProgress();
                return;
            }
            
            try {
                const checkboxStates = JSON.parse(saved);
                Object.keys(checkboxStates).forEach(taskId => {
                    const container = document.querySelector(`[data-task-id="${taskId}"]`);
                    if (container) {
                        const checkbox = container.querySelector('.task-checkbox');
                        if (checkbox) {
                            checkbox.checked = checkboxStates[taskId];
                        }
                    }
                });
                updateProgress();
            } catch (error) {
                console.error('Error loading progress:', error);
                updateProgress(); // Initialize if there's an error
            }
        }

        function resetAllProgress() {
            localStorage.removeItem(STORAGE_KEY);
            document.querySelectorAll('.task-checkbox').forEach(checkbox => {
                checkbox.checked = false;
            });
            updateProgress();
        }
        
        // --- Initial Load ---
        window.addEventListener('load', function() {
            // Load saved progress first
            loadProgress();
            
            // Check if there's a hash in URL (anchor link from external page)
            const hash = window.location.hash;
            
            if (hash) {
                // External link with anchor - force go to notes page first
                const targetId = hash.substring(1); // Remove the '#'
                
                // First, show the notes page
                showPage('notes');
                
                // Then, after a short delay, navigate to the specific AKM
                setTimeout(() => {
                    const targetAKM = document.getElementById(targetId);
                    if (targetAKM) {
                        // Find and expand the parent domain
                        const domainContent = targetAKM.closest('.domain-content');
                        if (domainContent && !domainContent.classList.contains('expanded')) {
                            toggleDomain(domainContent.id);
                        }
                        
                        // Expand the AKM module itself
                        const akmBody = document.getElementById('body-' + targetId);
                        if (akmBody && !akmBody.classList.contains('expanded')) {
                            toggleAKM(targetId);
                        }
                        
                        // Scroll to the target after animations
                        setTimeout(() => {
                            targetAKM.scrollIntoView({ behavior: 'smooth', block: 'start' });
                            
                            // Add highlight effect
                            targetAKM.style.boxShadow = '0 0 20px rgba(245, 87, 108, 0.6)';
                            setTimeout(() => {
                                targetAKM.style.boxShadow = '0 2px 5px rgba(0,0,0,0.1)';
                            }, 2000);
                        }, 500); // Increased delay to allow expansion animation
                    }
                }, 100);
            } else {
                // No hash - load saved page or default to battle-plan
                const savedPage = localStorage.getItem('currentPage');
                if (savedPage && savedPage === 'notes') {
                    showPage('notes');
                } else {
                    showPage('battle-plan');
                }
            }
        });
        
    </script>
</body>
</html>




